<!DOCTYPE html>
<html lang="en-US">

<head>

    <meta charset="utf-8">
    <title>Base Converter - PentaHex</title>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <link href="https://fonts.googleapis.com/css?family=Ubuntu" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Squada+One" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=PT+Mono" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="/main.css">
    <link rel="shortcut icon" type="image/png" href="/images/favicon.png" />

</head>

<body>

    <h1>PentaHex</h1>
    <table style='width:100%;' id="menu">
        <tr>
            <td></td>
            <td style='width:75px'>
                <a href="/">HOME</a>
            </td>
            <td style='width:105px'>
                <a href="/writeups/">WRITEUPS</a>
            </td>
            <td style='width:80px'>
                <a href="/tools/">TOOLS</a>
            </td>
            <td style='width:115px'>
                <a href="/resources/">RESOURCES</a>
            </td>
            <td style='width:110px'>
                <a href="/tutorials/">TUTORIALS</a>
            </td>
            <td style='width:85px'>
                <a href="/about.html">ABOUT</a>
            </td>
            <td></td>
        </tr>
    </table>

    <div id="container1">
        <div id="container2">

            <h2>Base Converter</h2>
            
            <p>Enter a number to convert. Then, enter a start and end base (2 or more).<br>NOTE: Large numbers will not be as accurate</p>
            
            NUMBER: <input class=button type="text" style="width:200px;" id="number" alt="Number">
            <br>
            <p style="display: inline;">START BASE: </p>
            <input class=button type="text" style="width:17px" value="10" id="startBase">
            <br>
            <p style="display: inline;">END BASE: </p>
            <input class=button type="text" style="width:17px" value="10" id="endBase">
            
            <br>
            <br>
            
            <input class="button" type="button" value="CALCULATE" onclick="update();" />
            
            <p id="output" class="code"></p>
            
            <br>
            
            <p>Don't know how to use this tool? Learn how different bases work in <a href="/tutorials/numberbases.html">this tutorial.</a></p>
            
        </div>
    </div>

    <script>
        function update() {
            var startBase = document.getElementById("startBase").value;
            var endBase = document.getElementById("endBase").value;
            var number = document.getElementById("number").value.replace(/ /g,"");
            var output = "";
            
            if (startBase == "") {
                document.getElementById("output").textContent = "ERROR: Please enter a start base";
                return;
            }
            if (number == "") {
                document.getElementById("output").textContent = "ERROR: Please enter a number...";
                return;
            }
            if (isNaN(startBase)) {
                document.getElementById("output").textContent = "ERROR: Please enter a number for the start base.";
                return;
            }
            if (parseInt(startBase) < 2) {
                document.getElementById("output").textContent = "ERROR: Start base not in correct range.";
                return;
            }
            if (isNaN(endBase)) {
                document.getElementById("output").textContent = "ERROR: Please enter a number for the end base.";
                return;
            }
            if (parseInt(endBase) < 2) {
                document.getElementById("output").textContent = "ERROR: End base not in correct range.";
                return;
            }
            
            var finalResult = "";
            
            var result = "";
            
            var n = 0;
            var z = 0;
            startBase = parseInt(startBase,10);
            for (var i = number.length - 1; i >= 0; i --) {
                if (isNaN (parseInt(number[i],startBase))) {
                    document.getElementById("output").innerHTML = "ERROR: Invalid characters. Check the number.";
                    return;
                }
                n += number[i]*Math.pow(startBase,z);
                z ++;
            }
            number = n; //base 10 number

            var maxPow = 0;
            while ((number / (Math.pow(endBase,maxPow))) > endBase) {
                maxPow ++;
            }
            while (maxPow >= 0) {
                var l = ((number - (number % Math.pow(endBase, maxPow)))/Math.pow(endBase, maxPow));
                result += l.toString();
                number -= l*Math.pow(endBase, maxPow);
                maxPow --;
            }

            finalResult = "Base " + startBase.toString() + ": " + document.getElementById("number").value + "<br>Base " + endBase + ": " + result;

            document.getElementById("output").innerHTML = finalResult;
        }
    </script>

</body>

</html>
